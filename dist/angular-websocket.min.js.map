{"version":3,"sources":["dist/angular-websocket.js"],"names":["global","factory","define","amd","exports","module","require","mod","angular","ws","angularWebsocket","this","_angular","$WebSocketProvider","$rootScope","$q","$timeout","$websocketBackend","$WebSocket","url","protocols","options","wsOptions","arguments","length","undefined","isObject","isArray","ssl","test","scope","rootScopeFailover","useApplyAsync","initialTimeout","maxTimeout","reconnectIfNotNormalClose","binaryType","_reconnectAttempts","sendQueue","onOpenCallbacks","onMessageCallbacks","onErrorCallbacks","onCloseCallbacks","objectFreeze","_readyStateConstants","_connect","_setInternalState","prototype","CONNECTING","OPEN","CLOSING","CLOSED","RECONNECT_ABORTED","_normalCloseCode","_reconnectableStatusCodes","safeDigest","autoApply","$$phase","$digest","bindToScope","self","$on","force","socket","readyState","create","onmessage","_angular2","default","bind","_onMessageHandler","onopen","_onOpenHandler","onerror","_onErrorHandler","onclose","_onCloseHandler","fireQueue","data","shift","send","isString","message","JSON","stringify","deferred","resolve","notifyOpenCallbacks","event","i","call","notifyCloseCallbacks","notifyErrorCallbacks","onOpen","cb","push","onClose","onError","onMessage","callback","isFunction","Error","isDefined","filter","RegExp","fn","pattern","$applyAsync","code","indexOf","reconnect","applyAsyncOrDigest","args","arraySlice","apply","currentCallback","exec","close","bufferedAmount","cancelableify","promise","cancel","then","reason","splice","reject","defer","isMocked","isConnected","mockSend","backoffDelay","_getBackoffDelay","backoffDelaySeconds","console","log","attempt","R","Math","random","T","N","M","floor","min","pow","state","objectDefineProperty","_internalConnectionState","forEach","pending","get","set","$WebSocketBackendProvider","$log","Socket","createWebSocketBackend","warn","Object","defineProperty","value","obj","__esModule","window","Client","client","e","WebSocket","MozWebSocket","noop","freeze","Array","slice","elt","len","from","Number","ceil","service"],"mappings":"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"}